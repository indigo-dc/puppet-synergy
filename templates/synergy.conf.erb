[DEFAULT]


[Logger]
filename=<%= @synergy_log_file %>
level=<%= @synergy_log_level %>
formatter="%(asctime)s - %(name)s - %(levelname)s - %(message)s"
maxBytes=1048576
backupCount=100


[WSGI]
host=<%= @synergy_service_host %>
port=<%= @synergy_service_port %>
threads=2
use_ssl=False
#ssl_ca_file=
#ssl_cert_file=
#ssl_key_file=
max_header_line=16384
retry_until_window=30
tcp_keepidle=600
backlog=4096


[SchedulerManager]
autostart=True
# Rate (minutes)
rate=1

# The list of projects accessing to the dynamic quota
<%
projects = ""
shares = ""

@synergy_project_shares.each do |project, share|
    projects += "#{project}, "
    shares += "#{project}=#{share}, "
end

projects.chomp!(', ')
shares.chomp!(', ')
-%>
projects=<%= projects %>

# The integer value expresses the share
# shares=prj_a=70, prj_b=30
shares=<%= shares %>

# The integer value expresses the default max time to live (minutes) for VM/Container
default_TTL=2880

# The integer value expresses the max time to live (minutes) for VM/Container
# TTLs=prj_a=1440, prj_b=2880
TTLs=

# the integer value expresses the max depth used by the backfilling strategy:
# this allows Synergy to not check the whole queue when looking for VMs to start
backfill_depth=100

[FairShareManager]
autostart=True
# Rate (minutes)
rate=2

# Period size
# period_length=7

# Num of periods
# periods=3

# Default share value
default_share=10

# Weights
decay_weight=0.5
vcpus_weight=50
age_weight=0
memory_weight=50


[KeystoneManager]
autostart=True
rate=5

# The Keystone url (v3 only)
# auth_url=http://localhost:5000/v3
auth_url=<%= @keystone_url %>
# The name of user with admin role
username=<%= @keystone_admin_user %>
# The password of user with admin role
password=<%= @keystone_admin_password %>
# The project to request authorization on
project_name=admin
# Set the http connection timeout
timeout=60
# set the user domain name
user_domain_name=default
# set the project domain name
project_domain_name=default
# set the clock skew (default: 60 sec)
clock_skew = 60

[NovaManager]
autostart=True

# rate (minutes)
rate=5

#set the http connection timeout (default=60)
timeout=60

# The AMQP backend type (e.g. rabbit, qpid)
amqp_backend=<%= @amqp_backend %>
amqp_host=<%= @amqp_host %>
amqp_port=<%= @amqp_port %>
amqp_user=<%= @amqp_user %>
amqp_password=<%= @amqp_password %>
amqp_virt_host=<%= @amqp_virtual_host %>

# set the Nova host
host=<%= @nova_url %>

# The conductor topic
conductor_topic=conductor
# The compute topic
compute_topic=compute
# The scheduler topic
scheduler_topic=scheduler
# The NOVA database connection
# db_connection=DIALECT+DRIVER://USER:PASSWORD@HOST/DBNAME
db_connection=<%= @nova_db_url %>

# set the Nova CPU allocation ratio
cpu_allocation_ratio = 16

# set the Nova RAM allocation ratio
ram_allocation_ratio = 1.5

# set the Nova metadata_proxy_shared_secret
metadata_proxy_shared_secret=<%= @metadata_secret %>

[QueueManager]
autostart=True

# rate (minutes)
# rate=60

# The Synergy database connection
# db_connection=DIALECT+DRIVER://USER:PASSWORD@HOST/DBNAME
db_connection=<%= @synergy_db_url %>

# The connection pool size
# db_pool_size=10

# The max overflow
# db_max_overflow=5


[QuotaManager]
autostart=True
rate=5
